<!doctype html>
<html lang="bg">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AIRV v10.0 — COMPACT ANALYTIC</title>
<style>
  :root {
    --bg: #030503; --pnl: #0a0c0a; --brd: #1a231a;
    --grn: #00ff66; --grn-d: #004411; --amb: #ffaa00;
    --txt: #c0ffc0; --fnt: "Segoe UI", "Courier New", monospace;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { 
    background: var(--bg); color: var(--txt); 
    font-family: var(--fnt); text-transform: uppercase;
    display: flex; justify-content: center; min-height: 100vh;
  }

  /* Main Fixed Container */
  .app-container {
    width: 100%; max-width: 1200px;
    background: var(--pnl); border: 1px solid var(--brd);
    display: flex; flex-direction: column; height: 100vh;
  }

  header { 
    padding: 15px 25px; border-bottom: 2px solid var(--brd);
    display: flex; justify-content: space-between; align-items: center;
  }

  .main-flex { display: flex; flex: 1; overflow: hidden; }

  /* Left Panel */
  .sidebar {
    width: 300px; border-right: 2px solid var(--brd);
    padding: 20px; display: flex; flex-direction: column; gap: 15px;
    background: #060806; flex-shrink: 0;
  }

  /* Center Workspace */
  .workspace { flex: 1; padding: 30px; overflow-y: auto; background: var(--bg); }

  /* Elements */
  .btn { 
    background: transparent; border: 1px solid var(--grn-d); color: var(--grn); 
    padding: 14px; cursor: pointer; text-align: left; font-size: 11px; font-family: inherit;
    width: 100%; transition: 0.2s;
  }
  .btn:hover, .btn.active { background: var(--grn-d); color: #fff; border-color: var(--grn); }
  .btn-amb { border-color: var(--amb); color: var(--amb); }

  textarea, input { 
    background: #000; border: 1px solid var(--brd); color: var(--grn); 
    padding: 15px; font-size: 14px; width: 100%; outline: none; margin-top: 10px;
  }

  .bar-wrap { background: #000; height: 12px; border: 1px solid var(--brd); margin: 5px 0; position: relative; }
  .bar-fill { height: 100%; width: 0%; background: var(--grn); transition: 0.4s; }
  
  /* Responsive */
  @media (max-width: 850px) {
    .main-flex { flex-direction: column; overflow-y: auto; }
    .sidebar { width: 100%; height: auto; border-right: none; border-bottom: 2px solid var(--brd); }
    .app-container { height: auto; }
  }
</style>
</head>
<body>

<div class="app-container">
  <header>
    <div style="font-weight:900; color:var(--grn); letter-spacing:3px;">AIRV // ANALYTIC_FORCE_v10</div>
    <select id="lang" onchange="initLang()" style="background:#000; color:var(--grn); padding:4px; border:1px solid var(--brd);">
      <option value="bg">БЪЛГАРСКИ</option>
      <option value="en">ENGLISH</option>
    </select>
  </header>

  <div class="main-flex">
    <aside class="sidebar">
      <div id="nav-btns" style="display:flex; flex-direction:column; gap:8px;">
        <button class="btn" id="b-s1" onclick="nav('s1')">S1: IDEOGRAM</button>
        <button class="btn" id="b-s2" onclick="nav('s2')">S2: SENSORY</button>
        <button class="btn" id="b-s4" onclick="nav('s4')">S4: MATRIX</button>
        <button class="btn" id="b-s5" onclick="nav('s5')">S5: SUMMARY</button>
      </div>

      <div style="margin-top:20px; border-top: 1px solid var(--brd); padding-top:20px;">
        <span style="font-size:10px; color:var(--grn-d)" id="t-sig">СИЛА НА СИГНАЛА</span>
        <div class="bar-wrap"><div id="sig-bar" class="bar-fill"></div></div>
        <span style="font-size:10px; color:var(--grn-d)" id="t-aol">АНАЛИТИЧЕН ШУМ</span>
        <div class="bar-wrap"><div id="aol-bar" class="bar-fill" style="background:var(--amb)"></div></div>
      </div>

      <div style="margin-top:auto;">
        <div id="trn-box" style="color:var(--amb); font-size:22px; text-align:center; margin-bottom:10px;">---- - ----</div>
        <button class="btn btn-amb" onclick="startNew()" id="t-new">НОВА СЕСИЯ</button>
        <button class="btn" style="margin-top:8px; border-color:var(--grn)" onclick="nav('rep')" id="t-rep">ДОКЛАД</button>
      </div>
    </aside>

    <main class="workspace" id="ws">
       <div style="text-align:center; opacity:0.3; margin-top:100px;">SYSTEM READY. INITIALIZE SESSION.</div>
    </main>
  </div>
</div>

<script>
const STR = {
  bg: { sig: "СИЛА НА СИГНАЛА", aol: "АНАЛИТИЧЕН ШУМ", new: "НОВА СЕСИЯ", rep: "ФИНАЛИЗИРАЙ", s1_h: "ЕТАП 1: Начертайте импулса.", s2_h: "ЕТАП 2: СЕТИВА (Цветове, миризми, звуци).", s4_h: "ЕТАП 4: МАТРИЦА (Данни срещу Шум).", s5_h: "ЕТАП 5: ЗАКЛЮЧЕНИЕ." },
  en: { sig: "SIGNAL STRENGTH", aol: "ANALYTIC NOISE", new: "NEW SESSION", rep: "FINALIZE", s1_h: "STAGE 1: Sketch the impulse.", s2_h: "STAGE 2: SENSORY (Colors, smells, sounds).", s4_h: "STAGE 4: MATRIX (Data vs Noise).", s5_h: "STAGE 5: CONCLUSION." }
};

let state = { lang: 'bg', stage: 'none', trn: '', data: { s1:'', s2:'', s4s:'', s4d:'', s4aol:'', s5:'' } };

function initLang() {
  state.lang = document.getElementById('lang').value;
  const t = STR[state.lang];
  document.getElementById('t-sig').innerText = t.sig;
  document.getElementById('t-aol').innerText = t.aol;
  document.getElementById('t-new').innerText = t.new;
  document.getElementById('t-rep').innerText = t.rep;
  if(state.stage !== 'none') nav(state.stage);
}

function startNew() {
  state.trn = `${Math.floor(1000+Math.random()*8999)}-${Math.floor(1000+Math.random()*8999)}`;
  state.data = { s1:'', s2:'', s4s:'', s4d:'', s4aol:'', s5:'' };
  document.getElementById('trn-box').innerText = state.trn;
  nav('s1');
}

function nav(s) {
  state.stage = s;
  const ws = document.getElementById('ws');
  const t = STR[state.lang];
  document.querySelectorAll('.btn').forEach(b => b.classList.remove('active'));
  if(document.getElementById('b-'+s)) document.getElementById('b-'+s).classList.add('active');
  
  ws.innerHTML = `<h3 style="color:var(--amb); margin-bottom:15px;">>> ${t[s+'_h']}</h3>`;

  switch(s) {
    case 's1': ws.innerHTML += `<textarea oninput="state.data.s1=this.value">${state.data.s1}</textarea>`; break;
    case 's2': ws.innerHTML += `<textarea style="height:300px" oninput="state.data.s2=this.value; calc()">${state.data.s2}</textarea>`; break;
    case 's4': ws.innerHTML += `
      <input placeholder="SENSORY" oninput="state.data.s4s=this.value; calc()" value="${state.data.s4s}">
      <input placeholder="DIMENSIONS" oninput="state.data.s4d=this.value; calc()" value="${state.data.s4d}">
      <textarea placeholder="AOL (NOISE)" oninput="state.data.s4aol=this.value; calc()">${state.data.s4aol}</textarea>`; break;
    case 's5': ws.innerHTML += `<textarea style="height:300px" oninput="state.data.s5=this.value">${state.data.s5}</textarea>`; break;
    case 'rep': showRep(); break;
  }
  calc();
}

function calc() {
  const words = (state.data.s2 + ' ' + state.data.s4s + ' ' + state.data.s4d).trim().split(/\s+/).filter(x => x.length > 2).length;
  document.getElementById('sig-bar').style.width = Math.min(words * 8, 100) + '%';
  document.getElementById('aol-bar').style.width = Math.min(state.data.s4aol.length * 1.5, 100) + '%';
}

function showRep() {
  const sig = document.getElementById('sig-bar').style.width;
  const report = `[ FINAL INTEL REPORT ]\nTARGET: ${state.trn}\nSIGNAL: ${sig}\n\nDATA:\n${state.data.s2}\n\nCONCLUSION:\n${state.data.s5 || 'N/A'}`;
  document.getElementById('ws').innerHTML = `<div style="background:#000; padding:20px; border:1px solid var(--grn-d); white-space:pre-wrap;">${report}</div>`;
}

window.onload = initLang;
</script>
</body>
</html>
